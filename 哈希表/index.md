# 哈希表

**哈希表基础和实现**

**1、概念：**

哈希表是通过计算一个关于键值的函数，将所需查询的数据映射到表中一个位置来访问记录，这加快了查找速度。这个映射函数称做哈希函数，存放记录的数组称做**哈希表**。

底层使用数组实现：

数组+链表 数组+二叉树

数组中一般就是存放的单一的数据，而哈希表中存放的是一个键值对。

  

**2、哈希冲突处理：**

**2.1** 拉链法：将哈希值相同的元素构成一个链表，head放在散列表中。如果这里的链表长度大于等于8的话，链表就会转换成树结构，当然如果长度小于等于6的话，就会还原链表。以此来解决链表过长导致的性能问题。

  

**2.2** 开放寻址法：发生哈希冲突后，按照某一次序找到下一个空闲的单元，把冲突的元素放入。

  

**①线性探查法：**从发生冲突的单元开始探查，依次查看下一个单元是否为空，如果到了最后一个单元还是空，那么再从表首依次判断。如此执行直到碰到了空闲的单元或者已经探查完所有单元。**如果有空位，冲突元素一定能插入。缺点:可能产生“聚集”**

  

**②平方探查法：**依次查找(cnt ± i² )% tablesize 位置，直到遇到空闲的单元；可能存在哈希表中仍然有“空位”，但是冲突元素无法插入的情况。

  

**③双散列函数探查法**：定义两个散列函数分别为s1和s2，s1的算法和前面一致，s2取一个1～m-1之间并和m互为素数的数。s2作为步长。 更适合于造表前无法确定表长的情况；平均查找长度较短；适合结点规模较大时。

  

**3、哈希扩容**

当哈希表被占的位置比较多的时候，出现哈希冲突的概率也就变高了，所以很有必要进行扩容。

增长因子0.75：当它当前的容量占总容量的百分之七十五的时候就需要扩容了。

  

扩容过程：**新创建一个数组是原来的2倍，然后把原数组的所有键值对都重新Hash一遍放到新的数组**。因为数组扩大了，所以一般哈希函数也会有变化，这里的Hash也就是把之前的数据通过新的哈希函数计算出新的位置来存放。

  

**4、哈希表最重要的是哈希函数：**

哈希函数是一种映射关系，根据关键词key，经过一定函数关系得到元素的位置。一个哈希函数设计的足够好的话，就会减少哈希冲突的概率；极大的提升性能

  

常见的哈希函数构造方法：

**①直接定址法**：取关键字或关键字的某个线性函数值为散列地址。

H(key) = a*key + b，其中a和b为常数

**②除留余数法**：取关键字被某个不大于散列表长度 m 的数 p 求余，得到的作为散列地址。

H(key) = key % p, p < m

**③叠加法**：将关键字分为位数相同的几部分，然后取这几部分的叠加和（舍去进位）作为散列地址。 用于关键字位数较多，并且关键字中每一位上数字分布大致均匀。

**④随机数法**：选择一个随机函数，把关键字的随机函数值作为它的哈希值。 通常当关键字的长度不等时用这种方法。 当关键字是整数类型时就可以用除留余数法；如果关键字是小数类型，选择随机数法会比较好。

参考文献：知识星球
时间：2021-09-07
标签： #算法 

